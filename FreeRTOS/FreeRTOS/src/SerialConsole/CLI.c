/**************************************************************************//**
* @file      CLI.c
* @brief     Files managing command line arguments
* @author    Adi
* @date      2023-12-31

******************************************************************************/

/******************************************************************************
* Includes
******************************************************************************/
#include <asf.h>
#include "CLI.h"
/******************************************************************************
* Defines
******************************************************************************/

/******************************************************************************
* Variables
******************************************************************************/

/******************************************************************************
* Forward Declarations
******************************************************************************/

/******************************************************************************
* Callback Functions
******************************************************************************/

/******************************************************************************
* Static Functions
******************************************************************************/

/******************************************************************************
* Global Functions
******************************************************************************/

/**************************************************************************//**
* @fn		int32_t CLI_ExtractCmd(char * cmd, int32_t length)
* @brief	Extract command from command line input			
* @param[in]	cmd - Command line input
*				length - length of command
* @param[out]	N/A
* @return		Status
* @note         
*****************************************************************************/
int32_t CLI_ExtractCmd(char * cmd, int32_t length) {
	char* token = strtok(cmd, " ");
	char str[20];
	if(strncmp(token, COMMAND_LED, length) == 0) {
		token = strtok(NULL, " ");
		int delay = atoi(token);
		dUART_WriteString((char *)"Valid command\r\n");
		snprintf(str, 20, "Delay - %d\r\n", delay);
		dUART_WriteString(str);
		/*
		if(xQueueSend(LEDQueue, (const void* )&delay, pdFALSE) != pdTRUE) {
			dUART_WriteString("LED Queue Full!!\r\n");
		}
		*/
		//dUART_WriteString((char *)"\r\n");
		return delay;
	} else {
		dUART_WriteString((char *)"Invalid command\r\n");
	}
	return -1;
}